<body>

  <h1>Snarkjs client example</h1>
  <button id="bGenProof"> Create proof </button>

  <!-- JS-generated output will be added here. -->
  <pre class="proof"> PublicInputs: <code id="pubinputs"></code></pre>
  <pre class="proof"> Proof: <code id="proof"></code></pre>

  <pre class="proof"> Result: <code id="result"></code></pre>


  <script src="snarkjs.min.js">   </script>


  <!-- This is the bundle generated by rollup.js -->
  <script>

const pubinputsComponent = document.getElementById('pubinputs');
const proofComponent = document.getElementById('proof');
const resultComponent = document.getElementById('result');
const bGenProof = document.getElementById("bGenProof");

bGenProof.addEventListener("click", calculateProof);

async function calculateProof() {

  const inputs = {
	  censusRoot: 10218369977673547523728355147149957098711008851521388639921026317490981642638n,
	  censusSiblings: [ 0n, 0n, 0n, 0n ],
	  privateKey: 3876493977147089964395646989418653640709890493868463039177063670701706079087n,
	  voteValue: 2n,
	  electionId: 1n,
	  nullifier: 3186036676392928174548062723257977428484950876976874299082067205621815010072n
    };

    const { proof, publicSignals } =
      await snarkjs.groth16.fullProve(inputs, "circuit.wasm", "circuit_final.zkey");

    proofComponent.innerHTML = JSON.stringify(proof, null, 1);
    pubinputsComponent.innerHTML = JSON.stringify(publicSignals, null, 1);


    const vkey = await fetch("verification_key.json").then( function(res) {
        return res.json();
    });

    const res = await snarkjs.groth16.verify(vkey, publicSignals, proof);

    resultComponent.innerHTML = res;
}

  </script>

</body>
</html>
