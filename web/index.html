<body>

  <h1>Snarkjs client example</h1>
  <button id="bGenProof"> Create proof </button>

  <!-- JS-generated output will be added here. -->
  <pre class="proof"> PublicInputs: <code id="pubinputs"></code></pre>
  <pre class="proof"> Proof: <code id="proof"></code></pre>

  <pre class="proof"> Result: <code id="result"></code></pre>


  <script src="snarkjs.min.js">   </script>


  <!-- This is the bundle generated by rollup.js -->
  <script>

const pubinputsComponent = document.getElementById('pubinputs');
const proofComponent = document.getElementById('proof');
const resultComponent = document.getElementById('result');
const bGenProof = document.getElementById("bGenProof");

bGenProof.addEventListener("click", calculateProof);

async function calculateProof() {

  const inputs = {
	  censusRoot: 13256983273841966279055596043431919350426357891097196583481278449962353221936n,
	  censusSiblings: [ 0n, 0n, 0n, 0n, 0n, 0n, 0n, 0n, 0n, 0n, 0n, 0n, 0n, 0n, 0n, 0n, 0n, 0n, 0n, 0n, 0n],
	  index: 0n,
	  secretKey: 3876493977147089964395646989418653640709890493868463039177063670701706079087n,
	  voteHash: [302689215824177652345211539748426020171n, 205062086841587857568430695525160476881n],
	  electionId: 10n,
	  nullifier: 512956825156072911942930000072467850503272879939251541441978430922425553120n
    };

    const { proof, publicSignals } =
      await snarkjs.groth16.fullProve(inputs, "circuit.wasm", "circuit_final.zkey");

    proofComponent.innerHTML = JSON.stringify(proof, null, 1);
    pubinputsComponent.innerHTML = JSON.stringify(publicSignals, null, 1);


    const vkey = await fetch("verification_key.json").then( function(res) {
        return res.json();
    });

    const res = await snarkjs.groth16.verify(vkey, publicSignals, proof);

    resultComponent.innerHTML = res;
}

  </script>

</body>
</html>
